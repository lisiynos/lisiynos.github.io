<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<!-- This file is part of Flash Pascal project. See 'http://flashpascal.sf.net' for more. (c) 2011 by Péter Gábor (ptrg) -->
<html>
  <head>
    <meta content="text/html; charset=UTF-8" http-equiv="content-type">
    <meta name="description" content="Flash Pascal is a Pascal like language compiler that build Flash (SWF) files. This manual contains informations about the special abilities and adventages of the Flash Pascal compiler.">
    <title>Flash Pascal - FlashMine.pas
    </title>
    <meta name="generator" content="SynEdit HTML exporter" />
    <style type="text/css">
      <!--
            body { color: #000000; background-color: #FFFFFF; }
            .pas1-assembler { color: #008000; font-weight: bold; }
            .pas1-character { color: #000000; }
            .pas1-comment { color: #0000FF; font-weight: bold; }
            .pas1-datatype { }
            .pas1-float { color: #000080; }
            .pas1-hexadecimal { color: #000080; }
            .pas1-identifier { color: #000000; }
            .pas1-number { color: #000080; }
            .pas1-preprocessor { color: #FF0000; font-weight: bold; }
            .pas1-reservedword { color: #000000; font-weight: bold; }
            .pas1-space { color: #000000; }
            .pas1-string { color: #800080; }
            .pas1-symbol { color: #FF0000; }
            -->
      A { color:#800000; text-decoration: none;}
    </style>
  </head>
  <body style="font: 12px Arial; color: rgb(0, 0, 0); padding: 20px;  background-color:#d0d0d0;" alink="#ee0000" link="#0000ee" vlink="#551a8b">
    <div style="border: solid 1px gray;  background-color: #ffffff;  padding: 10px;">
      <table width="100%"><tr><td>
      <img style="border: 0px; float:left; margin: 0px 10px 0px 0px;" src="FlashPascal.png" alt="Flash Pascal" title="Flash Pascal">
      <span style="font: bold 24px Arial;">Flash Pascal - FlashMine.pas
      </span>
      <br>
      <br>Flash Pascal is a Pascal like language compiler that build Flash (SWF) files.
      <br>
      <br>
      <br>Pascal for Flash compiler (c)2008 by Paul TOTH
      <br>Pascal for Flash compiler portions (c) 2011 by Péter Gábor
     </td></tr></table>
      <br>You can build a MineSweeper game with just some Pascal knowlege!
      <br>
      <br>
      <object height="270" width="240">
        <param name="movie" value="FlashMine.swf">
        <embed tplayername="SWF" splayername="SWF" id="Player1219614649813" type="application/x-shockwave-flash" src="FlashMine.swf" mediawrapchecked="true" pluginspage="http://www.macromedia.com/go/getflashplayer" height="270" width="240">
      </object> (<a class="ex" href="FlashMine.swf" target="_blank">full screen</a>)
      <br>
      <br>
      <hr>
<pre>
<code><span style="font: 8pt Courier New;"><span class="pas1-reservedword">program</span><span class="pas1-space"> FlashMine</span><span class="pas1-symbol">;</span><span class="pas1-space"> </span><span class="pas1-comment">
{ Flash Pascal Mines game (c) 2008 by Paul TOTH &lt;tothpaul@free.fr&gt; }
</span><span class="pas1-preprocessor">{$FRAME_WIDTH  240}
{$FRAME_HEIGHT 270}
</span><span class="pas1-reservedword">uses
</span><span class="pas1-space"> Flash8Ext</span><span class="pas1-symbol">,</span><span class="pas1-identifier">Math</span><span class="pas1-symbol">,</span><span class="pas1-identifier">Key</span><span class="pas1-symbol">;
</span><span class="pas1-reservedword">type
</span><span class="pas1-space"> TCell</span><span class="pas1-symbol">=</span><span class="pas1-reservedword">class</span><span class="pas1-symbol">(</span><span class="pas1-identifier">MovieClip</span><span class="pas1-symbol">)
</span><span class="pas1-space">  State</span><span class="pas1-symbol">:</span><span class="pas1-datatype">integer</span><span class="pas1-symbol">;
</span><span class="pas1-space">  Text </span><span class="pas1-symbol">:</span><span class="pas1-identifier">TextField</span><span class="pas1-symbol">;
</span><span class="pas1-space">  Count</span><span class="pas1-symbol">:</span><span class="pas1-datatype">integer</span><span class="pas1-symbol">;
</span><span class="pas1-space">  cx</span><span class="pas1-symbol">,</span><span class="pas1-identifier">cy</span><span class="pas1-symbol">:</span><span class="pas1-datatype">integer</span><span class="pas1-symbol">;
</span><span class="pas1-space">  </span><span class="pas1-reservedword">constructor</span><span class="pas1-space"> Create</span><span class="pas1-symbol">(</span><span class="pas1-identifier">Name</span><span class="pas1-symbol">:</span><span class="pas1-reservedword">string</span><span class="pas1-symbol">;</span><span class="pas1-space"> x</span><span class="pas1-symbol">,</span><span class="pas1-identifier">y</span><span class="pas1-symbol">:</span><span class="pas1-datatype">integer</span><span class="pas1-symbol">);
</span><span class="pas1-space">  </span><span class="pas1-reservedword">procedure</span><span class="pas1-space"> doRelease</span><span class="pas1-symbol">;
</span><span class="pas1-space">  </span><span class="pas1-reservedword">procedure</span><span class="pas1-space"> Circle</span><span class="pas1-symbol">(</span><span class="pas1-identifier">radius</span><span class="pas1-symbol">:</span><span class="pas1-datatype">integer</span><span class="pas1-symbol">);
</span><span class="pas1-space">  </span><span class="pas1-reservedword">procedure</span><span class="pas1-space"> Reset</span><span class="pas1-symbol">;
</span><span class="pas1-space">  </span><span class="pas1-reservedword">procedure</span><span class="pas1-space"> DoFlag</span><span class="pas1-symbol">;
</span><span class="pas1-space">  </span><span class="pas1-reservedword">procedure</span><span class="pas1-space"> IsUp</span><span class="pas1-symbol">(</span><span class="pas1-identifier">NewState</span><span class="pas1-symbol">:</span><span class="pas1-datatype">integer</span><span class="pas1-symbol">);
</span><span class="pas1-space">  </span><span class="pas1-reservedword">procedure</span><span class="pas1-space"> IsDown_</span><span class="pas1-symbol">(</span><span class="pas1-identifier">color</span><span class="pas1-symbol">:</span><span class="pas1-datatype">integer</span><span class="pas1-symbol">);</span><span class="pas1-space"> </span><span class="pas1-comment">// original: procedure IsDown(color:integer);
</span><span class="pas1-space">  </span><span class="pas1-reservedword">procedure</span><span class="pas1-space"> IsBomb</span><span class="pas1-symbol">(</span><span class="pas1-identifier">color</span><span class="pas1-symbol">:</span><span class="pas1-datatype">integer</span><span class="pas1-symbol">);
</span><span class="pas1-space">  </span><span class="pas1-reservedword">procedure</span><span class="pas1-space"> IsFlag</span><span class="pas1-symbol">(</span><span class="pas1-identifier">NewState</span><span class="pas1-symbol">:</span><span class="pas1-datatype">integer</span><span class="pas1-symbol">);
</span><span class="pas1-space">  </span><span class="pas1-reservedword">procedure</span><span class="pas1-space"> IsWrong</span><span class="pas1-symbol">;
</span><span class="pas1-space"> </span><span class="pas1-reservedword">end</span><span class="pas1-symbol">;
</span><span class="pas1-space"> TLink</span><span class="pas1-symbol">=</span><span class="pas1-reservedword">class</span><span class="pas1-symbol">(</span><span class="pas1-identifier">MovieClip</span><span class="pas1-symbol">)
</span><span class="pas1-space">  </span><span class="pas1-reservedword">constructor</span><span class="pas1-space"> Create</span><span class="pas1-symbol">;
</span><span class="pas1-space">  </span><span class="pas1-reservedword">procedure</span><span class="pas1-space"> doRelease</span><span class="pas1-symbol">;
</span><span class="pas1-space"> </span><span class="pas1-reservedword">end</span><span class="pas1-symbol">;
</span><span class="pas1-space"> TMatrix</span><span class="pas1-symbol">=</span><span class="pas1-reservedword">class
</span><span class="pas1-space">  matrixType</span><span class="pas1-symbol">:</span><span class="pas1-reservedword">string</span><span class="pas1-symbol">;
</span><span class="pas1-space">  x</span><span class="pas1-symbol">,</span><span class="pas1-identifier">y</span><span class="pas1-symbol">,</span><span class="pas1-identifier">w</span><span class="pas1-symbol">,</span><span class="pas1-identifier">h</span><span class="pas1-symbol">:</span><span class="pas1-datatype">double</span><span class="pas1-symbol">;
</span><span class="pas1-space">  r</span><span class="pas1-symbol">:</span><span class="pas1-datatype">double</span><span class="pas1-symbol">;
</span><span class="pas1-space">  </span><span class="pas1-reservedword">constructor</span><span class="pas1-space"> Create</span><span class="pas1-symbol">;
</span><span class="pas1-space"> </span><span class="pas1-reservedword">end</span><span class="pas1-symbol">;
</span><span class="pas1-reservedword">var
</span><span class="pas1-space"> Cells  </span><span class="pas1-symbol">:</span><span class="pas1-reservedword">array</span><span class="pas1-symbol">[</span><span class="pas1-number">0</span><span class="pas1-symbol">..</span><span class="pas1-number">15</span><span class="pas1-symbol">,</span><span class="pas1-number">0</span><span class="pas1-symbol">..</span><span class="pas1-number">15</span><span class="pas1-symbol">]</span><span class="pas1-space"> </span><span class="pas1-reservedword">of</span><span class="pas1-space"> TCell</span><span class="pas1-symbol">;
</span><span class="pas1-space"> Mines  </span><span class="pas1-symbol">:</span><span class="pas1-datatype">integer</span><span class="pas1-symbol">;
</span><span class="pas1-space"> Flags  </span><span class="pas1-symbol">:</span><span class="pas1-datatype">integer</span><span class="pas1-symbol">;
</span><span class="pas1-space"> x</span><span class="pas1-symbol">,</span><span class="pas1-identifier">y</span><span class="pas1-symbol">,</span><span class="pas1-identifier">i  </span><span class="pas1-symbol">:</span><span class="pas1-datatype">integer</span><span class="pas1-symbol">;
</span><span class="pas1-space"> link   </span><span class="pas1-symbol">:</span><span class="pas1-identifier">TLink</span><span class="pas1-symbol">;
</span><span class="pas1-space"> format </span><span class="pas1-symbol">:</span><span class="pas1-identifier">TextFormat</span><span class="pas1-symbol">;
</span><span class="pas1-space"> Matrix </span><span class="pas1-symbol">:</span><span class="pas1-identifier">TMatrix</span><span class="pas1-symbol">;
</span><span class="pas1-space"> Restart</span><span class="pas1-symbol">:</span><span class="pas1-datatype">boolean</span><span class="pas1-symbol">;
</span><span class="pas1-space"> Bombs  </span><span class="pas1-symbol">:</span><span class="pas1-identifier">TextField</span><span class="pas1-symbol">;
</span><span class="pas1-reservedword">procedure</span><span class="pas1-space"> CheckEmpty</span><span class="pas1-symbol">(</span><span class="pas1-identifier">x</span><span class="pas1-symbol">,</span><span class="pas1-identifier">y</span><span class="pas1-symbol">:</span><span class="pas1-datatype">integer</span><span class="pas1-symbol">);
</span><span class="pas1-reservedword">begin
</span><span class="pas1-space"> </span><span class="pas1-reservedword">if</span><span class="pas1-space"> </span><span class="pas1-symbol">(</span><span class="pas1-identifier">x</span><span class="pas1-symbol">&gt;=</span><span class="pas1-number">0</span><span class="pas1-symbol">)</span><span class="pas1-reservedword">and</span><span class="pas1-symbol">(</span><span class="pas1-identifier">y</span><span class="pas1-symbol">&gt;=</span><span class="pas1-number">0</span><span class="pas1-symbol">)</span><span class="pas1-reservedword">and</span><span class="pas1-symbol">(</span><span class="pas1-identifier">x</span><span class="pas1-symbol">&lt;</span><span class="pas1-number">16</span><span class="pas1-symbol">)</span><span class="pas1-reservedword">and</span><span class="pas1-symbol">(</span><span class="pas1-identifier">y</span><span class="pas1-symbol">&lt;</span><span class="pas1-number">16</span><span class="pas1-symbol">)</span><span class="pas1-space"> </span><span class="pas1-reservedword">then</span><span class="pas1-space"> </span><span class="pas1-reservedword">begin
</span><span class="pas1-space">  </span><span class="pas1-reservedword">if</span><span class="pas1-space"> </span><span class="pas1-symbol">(</span><span class="pas1-identifier">Cells</span><span class="pas1-symbol">[</span><span class="pas1-identifier">x</span><span class="pas1-symbol">,</span><span class="pas1-identifier">y</span><span class="pas1-symbol">].</span><span class="pas1-identifier">State</span><span class="pas1-symbol">=</span><span class="pas1-number">0</span><span class="pas1-symbol">)</span><span class="pas1-space"> </span><span class="pas1-reservedword">then
</span><span class="pas1-space">   Cells</span><span class="pas1-symbol">[</span><span class="pas1-identifier">x</span><span class="pas1-symbol">,</span><span class="pas1-identifier">y</span><span class="pas1-symbol">].</span><span class="pas1-identifier">doRelease</span><span class="pas1-symbol">;
</span><span class="pas1-space"> </span><span class="pas1-reservedword">end</span><span class="pas1-symbol">;
</span><span class="pas1-reservedword">end</span><span class="pas1-symbol">;
</span><span class="pas1-reservedword">function</span><span class="pas1-space"> GetState</span><span class="pas1-symbol">(</span><span class="pas1-identifier">x</span><span class="pas1-symbol">,</span><span class="pas1-identifier">y</span><span class="pas1-symbol">:</span><span class="pas1-datatype">integer</span><span class="pas1-symbol">):</span><span class="pas1-datatype">integer</span><span class="pas1-symbol">;
</span><span class="pas1-reservedword">begin
</span><span class="pas1-space"> </span><span class="pas1-reservedword">if</span><span class="pas1-space"> </span><span class="pas1-symbol">(</span><span class="pas1-identifier">x</span><span class="pas1-symbol">&lt;</span><span class="pas1-number">0</span><span class="pas1-symbol">)</span><span class="pas1-reservedword">or</span><span class="pas1-symbol">(</span><span class="pas1-identifier">y</span><span class="pas1-symbol">&lt;</span><span class="pas1-number">0</span><span class="pas1-symbol">)</span><span class="pas1-reservedword">or</span><span class="pas1-symbol">(</span><span class="pas1-identifier">x</span><span class="pas1-symbol">&gt;</span><span class="pas1-number">15</span><span class="pas1-symbol">)</span><span class="pas1-reservedword">or</span><span class="pas1-symbol">(</span><span class="pas1-identifier">y</span><span class="pas1-symbol">&gt;</span><span class="pas1-number">15</span><span class="pas1-symbol">)</span><span class="pas1-space"> </span><span class="pas1-reservedword">then</span><span class="pas1-space"> Result</span><span class="pas1-symbol">:=</span><span class="pas1-number">0</span><span class="pas1-space"> </span><span class="pas1-reservedword">else</span><span class="pas1-space"> Result</span><span class="pas1-symbol">:=</span><span class="pas1-identifier">Cells</span><span class="pas1-symbol">[</span><span class="pas1-identifier">x</span><span class="pas1-symbol">,</span><span class="pas1-identifier">y</span><span class="pas1-symbol">].</span><span class="pas1-identifier">State</span><span class="pas1-symbol">;
</span><span class="pas1-reservedword">end</span><span class="pas1-symbol">;
</span><span class="pas1-reservedword">procedure</span><span class="pas1-space"> NewGame</span><span class="pas1-symbol">;
</span><span class="pas1-reservedword">var
</span><span class="pas1-space"> x</span><span class="pas1-symbol">,</span><span class="pas1-identifier">y</span><span class="pas1-symbol">,</span><span class="pas1-identifier">i</span><span class="pas1-symbol">:</span><span class="pas1-datatype">integer</span><span class="pas1-symbol">;
</span><span class="pas1-reservedword">begin
</span><span class="pas1-space"> </span><span class="pas1-reservedword">for</span><span class="pas1-space"> x</span><span class="pas1-symbol">:=</span><span class="pas1-number">0</span><span class="pas1-space"> </span><span class="pas1-reservedword">to</span><span class="pas1-space"> </span><span class="pas1-number">15</span><span class="pas1-space"> </span><span class="pas1-reservedword">do
</span><span class="pas1-space">  </span><span class="pas1-reservedword">for</span><span class="pas1-space"> y</span><span class="pas1-symbol">:=</span><span class="pas1-number">0</span><span class="pas1-space"> </span><span class="pas1-reservedword">to</span><span class="pas1-space"> </span><span class="pas1-number">15</span><span class="pas1-space"> </span><span class="pas1-reservedword">do
</span><span class="pas1-space">   Cells</span><span class="pas1-symbol">[</span><span class="pas1-identifier">x</span><span class="pas1-symbol">,</span><span class="pas1-identifier">y</span><span class="pas1-symbol">].</span><span class="pas1-identifier">Reset</span><span class="pas1-symbol">;
</span><span class="pas1-space"> i</span><span class="pas1-symbol">:=</span><span class="pas1-number">40</span><span class="pas1-symbol">;
</span><span class="pas1-space"> Bombs</span><span class="pas1-symbol">.</span><span class="pas1-identifier">text</span><span class="pas1-symbol">:=</span><span class="pas1-identifier">IntToStr</span><span class="pas1-symbol">(</span><span class="pas1-identifier">i</span><span class="pas1-symbol">);
</span><span class="pas1-space"> format</span><span class="pas1-symbol">.</span><span class="pas1-identifier">color</span><span class="pas1-symbol">:=</span><span class="pas1-hexadecimal">$00ff00</span><span class="pas1-symbol">;
</span><span class="pas1-space"> Bombs</span><span class="pas1-symbol">.</span><span class="pas1-identifier">setTextFormat</span><span class="pas1-symbol">(</span><span class="pas1-identifier">format</span><span class="pas1-symbol">);
</span><span class="pas1-space"> Mines</span><span class="pas1-symbol">:=</span><span class="pas1-number">16</span><span class="pas1-symbol">*</span><span class="pas1-number">16</span><span class="pas1-symbol">;
</span><span class="pas1-space"> Flags</span><span class="pas1-symbol">:=</span><span class="pas1-number">0</span><span class="pas1-symbol">;
</span><span class="pas1-space"> </span><span class="pas1-reservedword">while</span><span class="pas1-space"> i</span><span class="pas1-symbol">&gt;</span><span class="pas1-number">0</span><span class="pas1-space"> </span><span class="pas1-reservedword">do</span><span class="pas1-space"> </span><span class="pas1-reservedword">begin
</span><span class="pas1-space">  x</span><span class="pas1-symbol">:=</span><span class="pas1-identifier">floor</span><span class="pas1-symbol">(</span><span class="pas1-identifier">random</span><span class="pas1-symbol">()*</span><span class="pas1-number">16</span><span class="pas1-symbol">);
</span><span class="pas1-space">  y</span><span class="pas1-symbol">:=</span><span class="pas1-identifier">floor</span><span class="pas1-symbol">(</span><span class="pas1-identifier">random</span><span class="pas1-symbol">()*</span><span class="pas1-number">16</span><span class="pas1-symbol">);
</span><span class="pas1-space">  </span><span class="pas1-reservedword">if</span><span class="pas1-space"> Cells</span><span class="pas1-symbol">[</span><span class="pas1-identifier">x</span><span class="pas1-symbol">,</span><span class="pas1-identifier">y</span><span class="pas1-symbol">].</span><span class="pas1-identifier">State</span><span class="pas1-symbol">=</span><span class="pas1-number">0</span><span class="pas1-space"> </span><span class="pas1-reservedword">then</span><span class="pas1-space"> </span><span class="pas1-reservedword">begin
</span><span class="pas1-space">   Cells</span><span class="pas1-symbol">[</span><span class="pas1-identifier">x</span><span class="pas1-symbol">,</span><span class="pas1-identifier">y</span><span class="pas1-symbol">].</span><span class="pas1-identifier">State</span><span class="pas1-symbol">:=</span><span class="pas1-number">1</span><span class="pas1-symbol">;
</span><span class="pas1-space">   i</span><span class="pas1-symbol">:=</span><span class="pas1-identifier">i</span><span class="pas1-symbol">-</span><span class="pas1-number">1</span><span class="pas1-symbol">;
</span><span class="pas1-space">  </span><span class="pas1-reservedword">end</span><span class="pas1-symbol">;
</span><span class="pas1-space"> </span><span class="pas1-reservedword">end</span><span class="pas1-symbol">;
</span><span class="pas1-space"> </span><span class="pas1-reservedword">for</span><span class="pas1-space"> x</span><span class="pas1-symbol">:=</span><span class="pas1-number">0</span><span class="pas1-space"> </span><span class="pas1-reservedword">to</span><span class="pas1-space"> </span><span class="pas1-number">15</span><span class="pas1-space"> </span><span class="pas1-reservedword">do
</span><span class="pas1-space">  </span><span class="pas1-reservedword">for</span><span class="pas1-space"> y</span><span class="pas1-symbol">:=</span><span class="pas1-number">0</span><span class="pas1-space"> </span><span class="pas1-reservedword">to</span><span class="pas1-space"> </span><span class="pas1-number">15</span><span class="pas1-space"> </span><span class="pas1-reservedword">do</span><span class="pas1-space"> </span><span class="pas1-reservedword">begin
</span><span class="pas1-space">   Cells</span><span class="pas1-symbol">[</span><span class="pas1-identifier">x</span><span class="pas1-symbol">,</span><span class="pas1-identifier">y</span><span class="pas1-symbol">].</span><span class="pas1-identifier">Count</span><span class="pas1-symbol">:=</span><span class="pas1-identifier">GetState</span><span class="pas1-symbol">(</span><span class="pas1-identifier">x</span><span class="pas1-symbol">-</span><span class="pas1-number">1</span><span class="pas1-symbol">,</span><span class="pas1-identifier">y</span><span class="pas1-symbol">-</span><span class="pas1-number">1</span><span class="pas1-symbol">)
</span><span class="pas1-space">                    </span><span class="pas1-symbol">+</span><span class="pas1-identifier">GetState</span><span class="pas1-symbol">(</span><span class="pas1-identifier">x</span><span class="pas1-symbol">-</span><span class="pas1-number">1</span><span class="pas1-symbol">,</span><span class="pas1-identifier">y  </span><span class="pas1-symbol">)
</span><span class="pas1-space">                    </span><span class="pas1-symbol">+</span><span class="pas1-identifier">GetState</span><span class="pas1-symbol">(</span><span class="pas1-identifier">x</span><span class="pas1-symbol">-</span><span class="pas1-number">1</span><span class="pas1-symbol">,</span><span class="pas1-identifier">y</span><span class="pas1-symbol">+</span><span class="pas1-number">1</span><span class="pas1-symbol">)
</span><span class="pas1-space">                    </span><span class="pas1-symbol">+</span><span class="pas1-identifier">GetState</span><span class="pas1-symbol">(</span><span class="pas1-identifier">x  </span><span class="pas1-symbol">,</span><span class="pas1-identifier">y</span><span class="pas1-symbol">-</span><span class="pas1-number">1</span><span class="pas1-symbol">)
</span><span class="pas1-space">                  </span><span class="pas1-comment">//+GetState(x  ,y  )
</span><span class="pas1-space">                    </span><span class="pas1-symbol">+</span><span class="pas1-identifier">GetState</span><span class="pas1-symbol">(</span><span class="pas1-identifier">x  </span><span class="pas1-symbol">,</span><span class="pas1-identifier">y</span><span class="pas1-symbol">+</span><span class="pas1-number">1</span><span class="pas1-symbol">)
</span><span class="pas1-space">                    </span><span class="pas1-symbol">+</span><span class="pas1-identifier">GetState</span><span class="pas1-symbol">(</span><span class="pas1-identifier">x</span><span class="pas1-symbol">+</span><span class="pas1-number">1</span><span class="pas1-symbol">,</span><span class="pas1-identifier">y</span><span class="pas1-symbol">-</span><span class="pas1-number">1</span><span class="pas1-symbol">)
</span><span class="pas1-space">                    </span><span class="pas1-symbol">+</span><span class="pas1-identifier">GetState</span><span class="pas1-symbol">(</span><span class="pas1-identifier">x</span><span class="pas1-symbol">+</span><span class="pas1-number">1</span><span class="pas1-symbol">,</span><span class="pas1-identifier">y  </span><span class="pas1-symbol">)
</span><span class="pas1-space">                    </span><span class="pas1-symbol">+</span><span class="pas1-identifier">GetState</span><span class="pas1-symbol">(</span><span class="pas1-identifier">x</span><span class="pas1-symbol">+</span><span class="pas1-number">1</span><span class="pas1-symbol">,</span><span class="pas1-identifier">y</span><span class="pas1-symbol">+</span><span class="pas1-number">1</span><span class="pas1-symbol">);
</span><span class="pas1-space">  </span><span class="pas1-reservedword">end</span><span class="pas1-symbol">;
</span><span class="pas1-space"> Restart</span><span class="pas1-symbol">:=</span><span class="pas1-identifier">False</span><span class="pas1-symbol">;
</span><span class="pas1-reservedword">end</span><span class="pas1-symbol">;
</span><span class="pas1-reservedword">constructor</span><span class="pas1-space"> TLink</span><span class="pas1-symbol">.</span><span class="pas1-identifier">Create</span><span class="pas1-symbol">;
</span><span class="pas1-reservedword">var
</span><span class="pas1-space"> t</span><span class="pas1-symbol">:</span><span class="pas1-identifier">TextField</span><span class="pas1-symbol">;
</span><span class="pas1-reservedword">begin
</span><span class="pas1-space"> </span><span class="pas1-reservedword">inherited</span><span class="pas1-space"> Create</span><span class="pas1-symbol">(</span><span class="pas1-reservedword">nil</span><span class="pas1-symbol">,</span><span class="pas1-string">'title'</span><span class="pas1-symbol">,-</span><span class="pas1-number">1</span><span class="pas1-symbol">);
</span><span class="pas1-space"> beginFill</span><span class="pas1-symbol">(</span><span class="pas1-hexadecimal">$000080</span><span class="pas1-symbol">);
</span><span class="pas1-space"> moveTo</span><span class="pas1-symbol">(</span><span class="pas1-number">0</span><span class="pas1-symbol">,</span><span class="pas1-number">0</span><span class="pas1-symbol">);
</span><span class="pas1-space"> lineTo</span><span class="pas1-symbol">(</span><span class="pas1-number">240</span><span class="pas1-symbol">,</span><span class="pas1-number">0</span><span class="pas1-symbol">);
</span><span class="pas1-space"> lineTo</span><span class="pas1-symbol">(</span><span class="pas1-number">240</span><span class="pas1-symbol">,</span><span class="pas1-number">15</span><span class="pas1-symbol">);
</span><span class="pas1-space"> lineTo</span><span class="pas1-symbol">(</span><span class="pas1-number">0</span><span class="pas1-symbol">,</span><span class="pas1-number">15</span><span class="pas1-symbol">);
</span><span class="pas1-space"> endFill</span><span class="pas1-symbol">;
</span><span class="pas1-space"> t</span><span class="pas1-symbol">:=</span><span class="pas1-identifier">TextField</span><span class="pas1-symbol">.</span><span class="pas1-identifier">Create</span><span class="pas1-symbol">(</span><span class="pas1-identifier">Self</span><span class="pas1-symbol">,</span><span class="pas1-string">'title_caption'</span><span class="pas1-symbol">,</span><span class="pas1-number">0</span><span class="pas1-symbol">,</span><span class="pas1-number">0</span><span class="pas1-symbol">,</span><span class="pas1-number">0</span><span class="pas1-symbol">,</span><span class="pas1-number">240</span><span class="pas1-symbol">,</span><span class="pas1-number">15</span><span class="pas1-symbol">);
</span><span class="pas1-space"> t</span><span class="pas1-symbol">.</span><span class="pas1-identifier">text</span><span class="pas1-symbol">:=</span><span class="pas1-string">'MineSweeper (c)2008 by Paul TOTH'</span><span class="pas1-symbol">;
</span><span class="pas1-space"> format</span><span class="pas1-symbol">.</span><span class="pas1-identifier">color</span><span class="pas1-symbol">:=</span><span class="pas1-hexadecimal">$ffffff</span><span class="pas1-symbol">;
</span><span class="pas1-space"> t</span><span class="pas1-symbol">.</span><span class="pas1-identifier">setTextFormat</span><span class="pas1-symbol">(</span><span class="pas1-identifier">format</span><span class="pas1-symbol">);
</span><span class="pas1-space"> onRelease</span><span class="pas1-symbol">:=</span><span class="pas1-identifier">doRelease</span><span class="pas1-symbol">;
</span><span class="pas1-reservedword">end</span><span class="pas1-symbol">;
</span><span class="pas1-reservedword">procedure</span><span class="pas1-space"> TLink</span><span class="pas1-symbol">.</span><span class="pas1-identifier">doRelease</span><span class="pas1-symbol">;
</span><span class="pas1-reservedword">begin
</span><span class="pas1-space"> getURL</span><span class="pas1-symbol">(</span><span class="pas1-string">'http://sourceforge.net/projects/flashpascal'</span><span class="pas1-symbol">,</span><span class="pas1-string">'_blank'</span><span class="pas1-symbol">);
</span><span class="pas1-reservedword">end</span><span class="pas1-symbol">;
</span><span class="pas1-reservedword">constructor</span><span class="pas1-space"> TCell</span><span class="pas1-symbol">.</span><span class="pas1-identifier">Create</span><span class="pas1-symbol">(</span><span class="pas1-identifier">Name</span><span class="pas1-symbol">:</span><span class="pas1-reservedword">string</span><span class="pas1-symbol">;</span><span class="pas1-space"> x</span><span class="pas1-symbol">,</span><span class="pas1-identifier">y</span><span class="pas1-symbol">:</span><span class="pas1-datatype">integer</span><span class="pas1-symbol">);
</span><span class="pas1-reservedword">begin
</span><span class="pas1-space"> </span><span class="pas1-reservedword">inherited</span><span class="pas1-space"> Create</span><span class="pas1-symbol">(</span><span class="pas1-reservedword">nil</span><span class="pas1-symbol">,</span><span class="pas1-identifier">Name</span><span class="pas1-symbol">,</span><span class="pas1-identifier">x</span><span class="pas1-symbol">+</span><span class="pas1-number">16</span><span class="pas1-symbol">*</span><span class="pas1-identifier">y</span><span class="pas1-symbol">);
</span><span class="pas1-space"> cx</span><span class="pas1-symbol">:=</span><span class="pas1-identifier">x</span><span class="pas1-symbol">;
</span><span class="pas1-space"> cy</span><span class="pas1-symbol">:=</span><span class="pas1-identifier">y</span><span class="pas1-symbol">;
</span><span class="pas1-space"> _x</span><span class="pas1-symbol">:=</span><span class="pas1-identifier">x</span><span class="pas1-symbol">*</span><span class="pas1-number">15</span><span class="pas1-symbol">+</span><span class="pas1-number">7</span><span class="pas1-symbol">;
</span><span class="pas1-space"> _y</span><span class="pas1-symbol">:=</span><span class="pas1-identifier">y</span><span class="pas1-symbol">*</span><span class="pas1-number">15</span><span class="pas1-symbol">+</span><span class="pas1-number">7</span><span class="pas1-symbol">+</span><span class="pas1-number">30</span><span class="pas1-symbol">;
</span><span class="pas1-space"> onRelease</span><span class="pas1-symbol">:=</span><span class="pas1-identifier">doRelease</span><span class="pas1-symbol">;
</span><span class="pas1-reservedword">end</span><span class="pas1-symbol">;
</span><span class="pas1-reservedword">procedure</span><span class="pas1-space"> TCell</span><span class="pas1-symbol">.</span><span class="pas1-identifier">doRelease</span><span class="pas1-symbol">;
</span><span class="pas1-reservedword">var
</span><span class="pas1-space"> x</span><span class="pas1-symbol">,</span><span class="pas1-identifier">y</span><span class="pas1-symbol">:</span><span class="pas1-datatype">integer</span><span class="pas1-symbol">;
</span><span class="pas1-reservedword">begin
</span><span class="pas1-space"> </span><span class="pas1-reservedword">if</span><span class="pas1-space"> Restart </span><span class="pas1-reservedword">then</span><span class="pas1-space"> </span><span class="pas1-reservedword">begin
</span><span class="pas1-space">  NewGame</span><span class="pas1-symbol">;
</span><span class="pas1-space"> </span><span class="pas1-reservedword">end</span><span class="pas1-space"> </span><span class="pas1-reservedword">else</span><span class="pas1-space"> </span><span class="pas1-reservedword">begin
</span><span class="pas1-space">  </span><span class="pas1-reservedword">if</span><span class="pas1-space"> isDown</span><span class="pas1-symbol">(</span><span class="pas1-identifier">kbSHIFT</span><span class="pas1-symbol">)</span><span class="pas1-space"> </span><span class="pas1-reservedword">then</span><span class="pas1-space"> </span><span class="pas1-reservedword">begin</span><span class="pas1-space"> </span><span class="pas1-comment">//original: if KeyDown(SHIFT) then begin
</span><span class="pas1-space">   DoFlag</span><span class="pas1-symbol">;
</span><span class="pas1-space">  </span><span class="pas1-reservedword">end</span><span class="pas1-space"> </span><span class="pas1-reservedword">else</span><span class="pas1-space"> </span><span class="pas1-reservedword">begin
</span><span class="pas1-space">   </span><span class="pas1-reservedword">if</span><span class="pas1-space"> State</span><span class="pas1-symbol">=</span><span class="pas1-number">0</span><span class="pas1-space"> </span><span class="pas1-reservedword">then</span><span class="pas1-space"> </span><span class="pas1-reservedword">begin
</span><span class="pas1-space">    Mines</span><span class="pas1-symbol">:=</span><span class="pas1-identifier">Mines</span><span class="pas1-symbol">-</span><span class="pas1-number">1</span><span class="pas1-symbol">;
</span><span class="pas1-space">    IsDown_</span><span class="pas1-symbol">(</span><span class="pas1-hexadecimal">$a0a0a0</span><span class="pas1-symbol">);
</span><span class="pas1-space">    </span><span class="pas1-reservedword">if</span><span class="pas1-space"> Count</span><span class="pas1-symbol">&gt;</span><span class="pas1-number">0</span><span class="pas1-space"> </span><span class="pas1-reservedword">then</span><span class="pas1-space"> </span><span class="pas1-reservedword">begin
</span><span class="pas1-space">     Text</span><span class="pas1-symbol">:=</span><span class="pas1-identifier">TextField</span><span class="pas1-symbol">.</span><span class="pas1-identifier">Create</span><span class="pas1-symbol">(</span><span class="pas1-identifier">Self</span><span class="pas1-symbol">,</span><span class="pas1-identifier">IntToStr</span><span class="pas1-symbol">(</span><span class="pas1-identifier">cx</span><span class="pas1-symbol">)+</span><span class="pas1-string">'_'</span><span class="pas1-symbol">+</span><span class="pas1-identifier">IntToStr</span><span class="pas1-symbol">(</span><span class="pas1-identifier">cy</span><span class="pas1-symbol">),</span><span class="pas1-number">0</span><span class="pas1-symbol">,-</span><span class="pas1-number">7</span><span class="pas1-symbol">,-</span><span class="pas1-number">7</span><span class="pas1-symbol">,</span><span class="pas1-number">15</span><span class="pas1-symbol">,</span><span class="pas1-number">15</span><span class="pas1-symbol">);
</span><span class="pas1-space">     Text</span><span class="pas1-symbol">.</span><span class="pas1-identifier">text</span><span class="pas1-symbol">:=</span><span class="pas1-identifier">IntToStr</span><span class="pas1-symbol">(</span><span class="pas1-identifier">Count</span><span class="pas1-symbol">);
</span><span class="pas1-space">     </span><span class="pas1-reservedword">case</span><span class="pas1-space"> Count </span><span class="pas1-reservedword">of
</span><span class="pas1-space">      </span><span class="pas1-number">1</span><span class="pas1-space"> </span><span class="pas1-symbol">:</span><span class="pas1-space"> format</span><span class="pas1-symbol">.</span><span class="pas1-identifier">color</span><span class="pas1-symbol">:=</span><span class="pas1-hexadecimal">$0000ff</span><span class="pas1-symbol">;
</span><span class="pas1-space">      </span><span class="pas1-number">2</span><span class="pas1-space"> </span><span class="pas1-symbol">:</span><span class="pas1-space"> format</span><span class="pas1-symbol">.</span><span class="pas1-identifier">color</span><span class="pas1-symbol">:=</span><span class="pas1-hexadecimal">$008000</span><span class="pas1-symbol">;
</span><span class="pas1-space">      </span><span class="pas1-number">3</span><span class="pas1-space"> </span><span class="pas1-symbol">:</span><span class="pas1-space"> format</span><span class="pas1-symbol">.</span><span class="pas1-identifier">color</span><span class="pas1-symbol">:=</span><span class="pas1-hexadecimal">$ff00ff</span><span class="pas1-symbol">;
</span><span class="pas1-space">      </span><span class="pas1-number">4</span><span class="pas1-space"> </span><span class="pas1-symbol">:</span><span class="pas1-space"> format</span><span class="pas1-symbol">.</span><span class="pas1-identifier">color</span><span class="pas1-symbol">:=</span><span class="pas1-hexadecimal">$000080</span><span class="pas1-symbol">;
</span><span class="pas1-space">      </span><span class="pas1-number">5</span><span class="pas1-space"> </span><span class="pas1-symbol">:</span><span class="pas1-space"> format</span><span class="pas1-symbol">.</span><span class="pas1-identifier">color</span><span class="pas1-symbol">:=</span><span class="pas1-hexadecimal">$800000</span><span class="pas1-symbol">;
</span><span class="pas1-space">      </span><span class="pas1-number">6</span><span class="pas1-space"> </span><span class="pas1-symbol">:</span><span class="pas1-space"> format</span><span class="pas1-symbol">.</span><span class="pas1-identifier">color</span><span class="pas1-symbol">:=</span><span class="pas1-hexadecimal">$008080</span><span class="pas1-symbol">;
</span><span class="pas1-space">      </span><span class="pas1-number">7</span><span class="pas1-space"> </span><span class="pas1-symbol">:</span><span class="pas1-space"> format</span><span class="pas1-symbol">.</span><span class="pas1-identifier">color</span><span class="pas1-symbol">:=</span><span class="pas1-hexadecimal">$ff00ff</span><span class="pas1-symbol">;
</span><span class="pas1-space">      </span><span class="pas1-number">8</span><span class="pas1-space"> </span><span class="pas1-symbol">:</span><span class="pas1-space"> format</span><span class="pas1-symbol">.</span><span class="pas1-identifier">color</span><span class="pas1-symbol">:=</span><span class="pas1-hexadecimal">$808000</span><span class="pas1-symbol">;
</span><span class="pas1-space">     </span><span class="pas1-reservedword">end</span><span class="pas1-symbol">;
</span><span class="pas1-space">     Text</span><span class="pas1-symbol">.</span><span class="pas1-identifier">setTextFormat</span><span class="pas1-symbol">(</span><span class="pas1-identifier">format</span><span class="pas1-symbol">);
</span><span class="pas1-space">    </span><span class="pas1-reservedword">end</span><span class="pas1-space"> </span><span class="pas1-reservedword">else</span><span class="pas1-space"> </span><span class="pas1-reservedword">begin
</span><span class="pas1-space">     </span><span class="pas1-reservedword">for</span><span class="pas1-space"> x</span><span class="pas1-symbol">:=-</span><span class="pas1-number">1</span><span class="pas1-space"> </span><span class="pas1-reservedword">to</span><span class="pas1-space"> </span><span class="pas1-symbol">+</span><span class="pas1-number">1</span><span class="pas1-space"> </span><span class="pas1-reservedword">do
</span><span class="pas1-space">      </span><span class="pas1-reservedword">for</span><span class="pas1-space"> y</span><span class="pas1-symbol">:=-</span><span class="pas1-number">1</span><span class="pas1-space"> </span><span class="pas1-reservedword">to</span><span class="pas1-space"> </span><span class="pas1-symbol">+</span><span class="pas1-number">1</span><span class="pas1-space"> </span><span class="pas1-reservedword">do
</span><span class="pas1-space">       CheckEmpty</span><span class="pas1-symbol">(</span><span class="pas1-identifier">x</span><span class="pas1-symbol">+</span><span class="pas1-identifier">cx</span><span class="pas1-symbol">,</span><span class="pas1-identifier">y</span><span class="pas1-symbol">+</span><span class="pas1-identifier">cy</span><span class="pas1-symbol">);
</span><span class="pas1-space">    </span><span class="pas1-reservedword">end</span><span class="pas1-symbol">;
</span><span class="pas1-space">   </span><span class="pas1-reservedword">end</span><span class="pas1-symbol">;
</span><span class="pas1-space">   </span><span class="pas1-reservedword">if</span><span class="pas1-space"> State</span><span class="pas1-symbol">=</span><span class="pas1-number">1</span><span class="pas1-space"> </span><span class="pas1-reservedword">then</span><span class="pas1-space"> </span><span class="pas1-reservedword">begin
</span><span class="pas1-space">    Restart</span><span class="pas1-symbol">:=</span><span class="pas1-identifier">True</span><span class="pas1-symbol">;
</span><span class="pas1-space">    IsBomb</span><span class="pas1-symbol">(</span><span class="pas1-hexadecimal">$ff0000</span><span class="pas1-symbol">);
</span><span class="pas1-space">    </span><span class="pas1-reservedword">for</span><span class="pas1-space"> x</span><span class="pas1-symbol">:=</span><span class="pas1-number">0</span><span class="pas1-space"> </span><span class="pas1-reservedword">to</span><span class="pas1-space"> </span><span class="pas1-number">15</span><span class="pas1-space"> </span><span class="pas1-reservedword">do
</span><span class="pas1-space">     </span><span class="pas1-reservedword">for</span><span class="pas1-space"> y</span><span class="pas1-symbol">:=</span><span class="pas1-number">0</span><span class="pas1-space"> </span><span class="pas1-reservedword">to</span><span class="pas1-space"> </span><span class="pas1-number">15</span><span class="pas1-space"> </span><span class="pas1-reservedword">do
</span><span class="pas1-space">      </span><span class="pas1-reservedword">case</span><span class="pas1-space"> Cells</span><span class="pas1-symbol">[</span><span class="pas1-identifier">x</span><span class="pas1-symbol">,</span><span class="pas1-identifier">y</span><span class="pas1-symbol">].</span><span class="pas1-identifier">State </span><span class="pas1-reservedword">of
</span><span class="pas1-space">       </span><span class="pas1-number">1</span><span class="pas1-symbol">:</span><span class="pas1-space"> Cells</span><span class="pas1-symbol">[</span><span class="pas1-identifier">x</span><span class="pas1-symbol">,</span><span class="pas1-identifier">y</span><span class="pas1-symbol">].</span><span class="pas1-identifier">IsBomb</span><span class="pas1-symbol">(</span><span class="pas1-hexadecimal">$a0a0a0</span><span class="pas1-symbol">);
</span><span class="pas1-space">       </span><span class="pas1-number">2</span><span class="pas1-symbol">:</span><span class="pas1-space"> Cells</span><span class="pas1-symbol">[</span><span class="pas1-identifier">x</span><span class="pas1-symbol">,</span><span class="pas1-identifier">y</span><span class="pas1-symbol">].</span><span class="pas1-identifier">IsWrong</span><span class="pas1-symbol">;
</span><span class="pas1-space">      </span><span class="pas1-reservedword">end</span><span class="pas1-symbol">;
</span><span class="pas1-space">   </span><span class="pas1-reservedword">end</span><span class="pas1-symbol">;
</span><span class="pas1-space">  </span><span class="pas1-reservedword">end</span><span class="pas1-symbol">;
</span><span class="pas1-space"> </span><span class="pas1-reservedword">end</span><span class="pas1-symbol">;
</span><span class="pas1-space"> </span><span class="pas1-reservedword">if</span><span class="pas1-space"> </span><span class="pas1-symbol">(</span><span class="pas1-identifier">Flags</span><span class="pas1-symbol">=</span><span class="pas1-number">40</span><span class="pas1-symbol">)</span><span class="pas1-reservedword">and</span><span class="pas1-symbol">(</span><span class="pas1-identifier">Mines</span><span class="pas1-symbol">=</span><span class="pas1-number">40</span><span class="pas1-symbol">)</span><span class="pas1-space"> </span><span class="pas1-reservedword">then</span><span class="pas1-space"> </span><span class="pas1-reservedword">begin
</span><span class="pas1-space">  Bombs</span><span class="pas1-symbol">.</span><span class="pas1-identifier">text</span><span class="pas1-symbol">:=</span><span class="pas1-string">'You WIN !'</span><span class="pas1-symbol">;
</span><span class="pas1-space">  format</span><span class="pas1-symbol">.</span><span class="pas1-identifier">color</span><span class="pas1-symbol">:=</span><span class="pas1-hexadecimal">$00ff00</span><span class="pas1-symbol">;
</span><span class="pas1-space">  Bombs</span><span class="pas1-symbol">.</span><span class="pas1-identifier">setTextFormat</span><span class="pas1-symbol">(</span><span class="pas1-identifier">format</span><span class="pas1-symbol">);
</span><span class="pas1-space">  Restart</span><span class="pas1-symbol">:=</span><span class="pas1-identifier">True</span><span class="pas1-symbol">;
</span><span class="pas1-space"> </span><span class="pas1-reservedword">end</span><span class="pas1-symbol">;
</span><span class="pas1-reservedword">end</span><span class="pas1-symbol">;
</span><span class="pas1-reservedword">procedure</span><span class="pas1-space"> TCell</span><span class="pas1-symbol">.</span><span class="pas1-identifier">Circle</span><span class="pas1-symbol">(</span><span class="pas1-identifier">Radius</span><span class="pas1-symbol">:</span><span class="pas1-datatype">integer</span><span class="pas1-symbol">);
</span><span class="pas1-reservedword">var
</span><span class="pas1-space"> a</span><span class="pas1-symbol">:</span><span class="pas1-datatype">double</span><span class="pas1-symbol">;
</span><span class="pas1-space"> c1</span><span class="pas1-symbol">,</span><span class="pas1-identifier">s1</span><span class="pas1-symbol">:</span><span class="pas1-datatype">double</span><span class="pas1-symbol">;
</span><span class="pas1-space"> c2</span><span class="pas1-symbol">,</span><span class="pas1-identifier">s2</span><span class="pas1-symbol">:</span><span class="pas1-datatype">double</span><span class="pas1-symbol">;
</span><span class="pas1-space"> r2</span><span class="pas1-symbol">:</span><span class="pas1-datatype">double</span><span class="pas1-symbol">;
</span><span class="pas1-reservedword">begin
</span><span class="pas1-space"> a</span><span class="pas1-symbol">:=</span><span class="pas1-float">3.14</span><span class="pas1-symbol">/</span><span class="pas1-number">4</span><span class="pas1-symbol">;
</span><span class="pas1-space"> c1</span><span class="pas1-symbol">:=</span><span class="pas1-identifier">cos</span><span class="pas1-symbol">(</span><span class="pas1-identifier">a</span><span class="pas1-symbol">);
</span><span class="pas1-space"> s1</span><span class="pas1-symbol">:=</span><span class="pas1-identifier">sin</span><span class="pas1-symbol">(</span><span class="pas1-identifier">a</span><span class="pas1-symbol">);
</span><span class="pas1-space"> a</span><span class="pas1-symbol">:=</span><span class="pas1-float">3.14</span><span class="pas1-symbol">/</span><span class="pas1-number">8</span><span class="pas1-symbol">;
</span><span class="pas1-space"> c2</span><span class="pas1-symbol">:=</span><span class="pas1-identifier">cos</span><span class="pas1-symbol">(</span><span class="pas1-identifier">a</span><span class="pas1-symbol">);
</span><span class="pas1-space"> s2</span><span class="pas1-symbol">:=</span><span class="pas1-identifier">sin</span><span class="pas1-symbol">(</span><span class="pas1-identifier">a</span><span class="pas1-symbol">);
</span><span class="pas1-space"> r2</span><span class="pas1-symbol">:=</span><span class="pas1-number">11</span><span class="pas1-symbol">*</span><span class="pas1-identifier">Radius</span><span class="pas1-symbol">/</span><span class="pas1-number">10</span><span class="pas1-symbol">;
</span><span class="pas1-space"> moveTo</span><span class="pas1-symbol">(</span><span class="pas1-number">0</span><span class="pas1-symbol">,</span><span class="pas1-identifier">Radius</span><span class="pas1-symbol">);
</span><span class="pas1-space"> curveTo</span><span class="pas1-symbol">(</span><span class="pas1-space"> r2</span><span class="pas1-symbol">*</span><span class="pas1-identifier">s2</span><span class="pas1-symbol">,</span><span class="pas1-space"> r2</span><span class="pas1-symbol">*</span><span class="pas1-identifier">c2</span><span class="pas1-symbol">,</span><span class="pas1-space"> Radius</span><span class="pas1-symbol">*</span><span class="pas1-identifier">s1</span><span class="pas1-symbol">,</span><span class="pas1-space"> Radius</span><span class="pas1-symbol">*</span><span class="pas1-identifier">c1</span><span class="pas1-symbol">);
</span><span class="pas1-space"> curveTo</span><span class="pas1-symbol">(</span><span class="pas1-space"> r2</span><span class="pas1-symbol">*</span><span class="pas1-identifier">c2</span><span class="pas1-symbol">,</span><span class="pas1-space"> r2</span><span class="pas1-symbol">*</span><span class="pas1-identifier">s2</span><span class="pas1-symbol">,</span><span class="pas1-space"> Radius</span><span class="pas1-symbol">,</span><span class="pas1-number">0</span><span class="pas1-symbol">);
</span><span class="pas1-space"> curveTo</span><span class="pas1-symbol">(</span><span class="pas1-space"> r2</span><span class="pas1-symbol">*</span><span class="pas1-identifier">c2</span><span class="pas1-symbol">,-</span><span class="pas1-identifier">r2</span><span class="pas1-symbol">*</span><span class="pas1-identifier">s2</span><span class="pas1-symbol">,</span><span class="pas1-space"> Radius</span><span class="pas1-symbol">*</span><span class="pas1-identifier">s1</span><span class="pas1-symbol">,-</span><span class="pas1-identifier">Radius</span><span class="pas1-symbol">*</span><span class="pas1-identifier">c1</span><span class="pas1-symbol">);
</span><span class="pas1-space"> curveTo</span><span class="pas1-symbol">(</span><span class="pas1-space"> r2</span><span class="pas1-symbol">*</span><span class="pas1-identifier">s2</span><span class="pas1-symbol">,-</span><span class="pas1-identifier">r2</span><span class="pas1-symbol">*</span><span class="pas1-identifier">c2</span><span class="pas1-symbol">,</span><span class="pas1-space"> </span><span class="pas1-number">0</span><span class="pas1-symbol">,-</span><span class="pas1-identifier">Radius</span><span class="pas1-symbol">);
</span><span class="pas1-space"> curveTo</span><span class="pas1-symbol">(-</span><span class="pas1-identifier">r2</span><span class="pas1-symbol">*</span><span class="pas1-identifier">s2</span><span class="pas1-symbol">,-</span><span class="pas1-identifier">r2</span><span class="pas1-symbol">*</span><span class="pas1-identifier">c2</span><span class="pas1-symbol">,-</span><span class="pas1-identifier">Radius</span><span class="pas1-symbol">*</span><span class="pas1-identifier">c1</span><span class="pas1-symbol">,-</span><span class="pas1-identifier">Radius</span><span class="pas1-symbol">*</span><span class="pas1-identifier">s1</span><span class="pas1-symbol">);
</span><span class="pas1-space"> curveTo</span><span class="pas1-symbol">(-</span><span class="pas1-identifier">r2</span><span class="pas1-symbol">*</span><span class="pas1-identifier">c2</span><span class="pas1-symbol">,-</span><span class="pas1-identifier">r2</span><span class="pas1-symbol">*</span><span class="pas1-identifier">s2</span><span class="pas1-symbol">,</span><span class="pas1-space"> </span><span class="pas1-symbol">-</span><span class="pas1-identifier">Radius</span><span class="pas1-symbol">,</span><span class="pas1-number">0</span><span class="pas1-symbol">);
</span><span class="pas1-space"> curveTo</span><span class="pas1-symbol">(-</span><span class="pas1-identifier">r2</span><span class="pas1-symbol">*</span><span class="pas1-identifier">c2</span><span class="pas1-symbol">,</span><span class="pas1-space"> r2</span><span class="pas1-symbol">*</span><span class="pas1-identifier">s2</span><span class="pas1-symbol">,-</span><span class="pas1-identifier">Radius</span><span class="pas1-symbol">*</span><span class="pas1-identifier">c1</span><span class="pas1-symbol">,</span><span class="pas1-space"> Radius</span><span class="pas1-symbol">*</span><span class="pas1-identifier">s1</span><span class="pas1-symbol">);
</span><span class="pas1-space"> curveTo</span><span class="pas1-symbol">(-</span><span class="pas1-identifier">r2</span><span class="pas1-symbol">*</span><span class="pas1-identifier">s2</span><span class="pas1-symbol">,</span><span class="pas1-space"> r2</span><span class="pas1-symbol">*</span><span class="pas1-identifier">c2</span><span class="pas1-symbol">,</span><span class="pas1-space"> </span><span class="pas1-number">0</span><span class="pas1-symbol">,</span><span class="pas1-identifier">Radius</span><span class="pas1-symbol">);
</span><span class="pas1-reservedword">end</span><span class="pas1-symbol">;
</span><span class="pas1-reservedword">procedure</span><span class="pas1-space"> TCell</span><span class="pas1-symbol">.</span><span class="pas1-identifier">Reset</span><span class="pas1-symbol">;
</span><span class="pas1-reservedword">begin
</span><span class="pas1-space"> </span><span class="pas1-reservedword">if</span><span class="pas1-space"> </span><span class="pas1-symbol">(</span><span class="pas1-identifier">State</span><span class="pas1-symbol">&lt;</span><span class="pas1-number">0</span><span class="pas1-symbol">)</span><span class="pas1-reservedword">and</span><span class="pas1-symbol">(</span><span class="pas1-identifier">Count</span><span class="pas1-symbol">&gt;</span><span class="pas1-number">0</span><span class="pas1-symbol">)</span><span class="pas1-space"> </span><span class="pas1-reservedword">then</span><span class="pas1-space"> Text</span><span class="pas1-symbol">.</span><span class="pas1-identifier">removeTextField</span><span class="pas1-symbol">();
</span><span class="pas1-space"> IsUp</span><span class="pas1-symbol">(</span><span class="pas1-number">0</span><span class="pas1-symbol">);
</span><span class="pas1-reservedword">end</span><span class="pas1-symbol">;
</span><span class="pas1-reservedword">procedure</span><span class="pas1-space"> TCell</span><span class="pas1-symbol">.</span><span class="pas1-identifier">DoFlag</span><span class="pas1-symbol">;
</span><span class="pas1-reservedword">begin
</span><span class="pas1-space"> </span><span class="pas1-reservedword">if</span><span class="pas1-space"> </span><span class="pas1-symbol">(</span><span class="pas1-identifier">State</span><span class="pas1-symbol">&gt;=</span><span class="pas1-number">0</span><span class="pas1-symbol">)</span><span class="pas1-reservedword">and</span><span class="pas1-symbol">(</span><span class="pas1-identifier">Flags</span><span class="pas1-symbol">&lt;</span><span class="pas1-number">40</span><span class="pas1-symbol">)</span><span class="pas1-space"> </span><span class="pas1-reservedword">then</span><span class="pas1-space"> </span><span class="pas1-reservedword">begin
</span><span class="pas1-space">  </span><span class="pas1-reservedword">case</span><span class="pas1-space"> State </span><span class="pas1-reservedword">of
</span><span class="pas1-space">   </span><span class="pas1-number">0</span><span class="pas1-symbol">:</span><span class="pas1-space"> IsFlag</span><span class="pas1-symbol">(</span><span class="pas1-number">2</span><span class="pas1-symbol">);
</span><span class="pas1-space">   </span><span class="pas1-number">1</span><span class="pas1-symbol">:</span><span class="pas1-space"> IsFlag</span><span class="pas1-symbol">(</span><span class="pas1-number">3</span><span class="pas1-symbol">);
</span><span class="pas1-space">   </span><span class="pas1-number">2</span><span class="pas1-symbol">:</span><span class="pas1-space"> IsUp</span><span class="pas1-symbol">(</span><span class="pas1-number">0</span><span class="pas1-symbol">);
</span><span class="pas1-space">   </span><span class="pas1-number">3</span><span class="pas1-symbol">:</span><span class="pas1-space"> IsUp</span><span class="pas1-symbol">(</span><span class="pas1-number">1</span><span class="pas1-symbol">);
</span><span class="pas1-space">  </span><span class="pas1-reservedword">end</span><span class="pas1-symbol">;
</span><span class="pas1-space">  Flags</span><span class="pas1-symbol">:=</span><span class="pas1-identifier">Flags</span><span class="pas1-symbol">-</span><span class="pas1-number">1</span><span class="pas1-symbol">;
</span><span class="pas1-space">  Bombs</span><span class="pas1-symbol">.</span><span class="pas1-identifier">text</span><span class="pas1-symbol">:=</span><span class="pas1-identifier">IntToStr</span><span class="pas1-symbol">(</span><span class="pas1-number">40</span><span class="pas1-symbol">-</span><span class="pas1-identifier">Flags</span><span class="pas1-symbol">);
</span><span class="pas1-space">  format</span><span class="pas1-symbol">.</span><span class="pas1-identifier">color</span><span class="pas1-symbol">:=</span><span class="pas1-hexadecimal">$00ff00</span><span class="pas1-symbol">;
</span><span class="pas1-space">  Bombs</span><span class="pas1-symbol">.</span><span class="pas1-identifier">setTextFormat</span><span class="pas1-symbol">(</span><span class="pas1-identifier">format</span><span class="pas1-symbol">);
</span><span class="pas1-space"> </span><span class="pas1-reservedword">end</span><span class="pas1-symbol">;
</span><span class="pas1-reservedword">end</span><span class="pas1-symbol">;
</span><span class="pas1-reservedword">procedure</span><span class="pas1-space"> TCell</span><span class="pas1-symbol">.</span><span class="pas1-identifier">IsUp</span><span class="pas1-symbol">(</span><span class="pas1-identifier">NewState</span><span class="pas1-symbol">:</span><span class="pas1-datatype">integer</span><span class="pas1-symbol">);
</span><span class="pas1-reservedword">begin
</span><span class="pas1-space"> State</span><span class="pas1-symbol">:=</span><span class="pas1-identifier">NewState</span><span class="pas1-symbol">;
</span><span class="pas1-space"> clear</span><span class="pas1-symbol">;
</span><span class="pas1-space"> beginFill</span><span class="pas1-symbol">(</span><span class="pas1-hexadecimal">$c0c0c0</span><span class="pas1-symbol">);
</span><span class="pas1-space"> lineStyle</span><span class="pas1-symbol">(</span><span class="pas1-number">1</span><span class="pas1-symbol">,</span><span class="pas1-hexadecimal">$ffffff</span><span class="pas1-symbol">);
</span><span class="pas1-space"> moveTo</span><span class="pas1-symbol">(-</span><span class="pas1-number">7</span><span class="pas1-symbol">,</span><span class="pas1-space"> </span><span class="pas1-number">7</span><span class="pas1-symbol">);
</span><span class="pas1-space"> lineTo</span><span class="pas1-symbol">(-</span><span class="pas1-number">7</span><span class="pas1-symbol">,-</span><span class="pas1-number">7</span><span class="pas1-symbol">);
</span><span class="pas1-space"> lineTo</span><span class="pas1-symbol">(</span><span class="pas1-space"> </span><span class="pas1-number">7</span><span class="pas1-symbol">,-</span><span class="pas1-number">7</span><span class="pas1-symbol">);
</span><span class="pas1-space"> lineStyle</span><span class="pas1-symbol">(</span><span class="pas1-number">1</span><span class="pas1-symbol">,</span><span class="pas1-hexadecimal">$808080</span><span class="pas1-symbol">);
</span><span class="pas1-space"> lineTo</span><span class="pas1-symbol">(</span><span class="pas1-space"> </span><span class="pas1-number">7</span><span class="pas1-symbol">,</span><span class="pas1-space"> </span><span class="pas1-number">7</span><span class="pas1-symbol">);
</span><span class="pas1-space"> lineTo</span><span class="pas1-symbol">(-</span><span class="pas1-number">7</span><span class="pas1-symbol">,</span><span class="pas1-space"> </span><span class="pas1-number">7</span><span class="pas1-symbol">);
</span><span class="pas1-space"> endFill</span><span class="pas1-symbol">;
</span><span class="pas1-reservedword">end</span><span class="pas1-symbol">;
</span><span class="pas1-reservedword">procedure</span><span class="pas1-space"> TCell</span><span class="pas1-symbol">.</span><span class="pas1-identifier">IsDown_</span><span class="pas1-symbol">(</span><span class="pas1-identifier">color</span><span class="pas1-symbol">:</span><span class="pas1-datatype">integer</span><span class="pas1-symbol">);
</span><span class="pas1-reservedword">begin
</span><span class="pas1-space"> State</span><span class="pas1-symbol">:=-</span><span class="pas1-number">1</span><span class="pas1-symbol">;
</span><span class="pas1-space"> clear</span><span class="pas1-symbol">;
</span><span class="pas1-space"> beginFill</span><span class="pas1-symbol">(</span><span class="pas1-identifier">color</span><span class="pas1-symbol">);
</span><span class="pas1-space"> lineStyle</span><span class="pas1-symbol">(</span><span class="pas1-number">1</span><span class="pas1-symbol">,</span><span class="pas1-hexadecimal">$808080</span><span class="pas1-symbol">);
</span><span class="pas1-space"> moveTo</span><span class="pas1-symbol">(-</span><span class="pas1-number">7</span><span class="pas1-symbol">,</span><span class="pas1-space"> </span><span class="pas1-number">7</span><span class="pas1-symbol">);
</span><span class="pas1-space"> lineTo</span><span class="pas1-symbol">(-</span><span class="pas1-number">7</span><span class="pas1-symbol">,-</span><span class="pas1-number">7</span><span class="pas1-symbol">);
</span><span class="pas1-space"> lineTo</span><span class="pas1-symbol">(</span><span class="pas1-space"> </span><span class="pas1-number">7</span><span class="pas1-symbol">,-</span><span class="pas1-number">7</span><span class="pas1-symbol">);
</span><span class="pas1-space"> lineStyle</span><span class="pas1-symbol">(</span><span class="pas1-number">1</span><span class="pas1-symbol">,</span><span class="pas1-hexadecimal">$c0c0c0</span><span class="pas1-symbol">);
</span><span class="pas1-space"> lineTo</span><span class="pas1-symbol">(</span><span class="pas1-space"> </span><span class="pas1-number">7</span><span class="pas1-symbol">,</span><span class="pas1-space"> </span><span class="pas1-number">7</span><span class="pas1-symbol">);
</span><span class="pas1-space"> lineTo</span><span class="pas1-symbol">(-</span><span class="pas1-number">7</span><span class="pas1-symbol">,</span><span class="pas1-space"> </span><span class="pas1-number">7</span><span class="pas1-symbol">);
</span><span class="pas1-space"> endFill</span><span class="pas1-symbol">;
</span><span class="pas1-reservedword">end</span><span class="pas1-symbol">;
</span><span class="pas1-reservedword">procedure</span><span class="pas1-space"> TCell</span><span class="pas1-symbol">.</span><span class="pas1-identifier">IsBomb</span><span class="pas1-symbol">(</span><span class="pas1-identifier">color</span><span class="pas1-symbol">:</span><span class="pas1-datatype">integer</span><span class="pas1-symbol">);
</span><span class="pas1-reservedword">begin
</span><span class="pas1-space"> IsDown_</span><span class="pas1-symbol">(</span><span class="pas1-identifier">color</span><span class="pas1-symbol">);
</span><span class="pas1-space"> lineStyle</span><span class="pas1-symbol">(</span><span class="pas1-number">0</span><span class="pas1-symbol">,</span><span class="pas1-number">0</span><span class="pas1-symbol">);
</span><span class="pas1-space"> beginGradientFill</span><span class="pas1-symbol">(</span><span class="pas1-string">'radial'</span><span class="pas1-symbol">,[</span><span class="pas1-hexadecimal">$ffffff</span><span class="pas1-symbol">,</span><span class="pas1-number">0</span><span class="pas1-symbol">],[</span><span class="pas1-number">100</span><span class="pas1-symbol">,</span><span class="pas1-number">100</span><span class="pas1-symbol">],[</span><span class="pas1-number">0</span><span class="pas1-symbol">,</span><span class="pas1-number">255</span><span class="pas1-symbol">],</span><span class="pas1-identifier">Matrix</span><span class="pas1-symbol">);
</span><span class="pas1-space"> circle</span><span class="pas1-symbol">(</span><span class="pas1-number">5</span><span class="pas1-symbol">);
</span><span class="pas1-space"> endFill</span><span class="pas1-symbol">;
</span><span class="pas1-space"> lineStyle</span><span class="pas1-symbol">(</span><span class="pas1-number">2</span><span class="pas1-symbol">,</span><span class="pas1-number">0</span><span class="pas1-symbol">);
</span><span class="pas1-space"> moveTo</span><span class="pas1-symbol">(</span><span class="pas1-number">0</span><span class="pas1-symbol">,</span><span class="pas1-space"> </span><span class="pas1-number">5</span><span class="pas1-symbol">);</span><span class="pas1-space"> lineTo</span><span class="pas1-symbol">(</span><span class="pas1-number">0</span><span class="pas1-symbol">,</span><span class="pas1-space"> </span><span class="pas1-number">6</span><span class="pas1-symbol">);
</span><span class="pas1-space"> moveTo</span><span class="pas1-symbol">(</span><span class="pas1-number">0</span><span class="pas1-symbol">,-</span><span class="pas1-number">5</span><span class="pas1-symbol">);</span><span class="pas1-space"> lineTo</span><span class="pas1-symbol">(</span><span class="pas1-number">0</span><span class="pas1-symbol">,-</span><span class="pas1-number">6</span><span class="pas1-symbol">);
</span><span class="pas1-space"> moveTo</span><span class="pas1-symbol">(</span><span class="pas1-space"> </span><span class="pas1-number">5</span><span class="pas1-symbol">,</span><span class="pas1-number">0</span><span class="pas1-symbol">);</span><span class="pas1-space"> lineTo</span><span class="pas1-symbol">(</span><span class="pas1-space"> </span><span class="pas1-number">6</span><span class="pas1-symbol">,</span><span class="pas1-number">0</span><span class="pas1-symbol">);
</span><span class="pas1-space"> moveTo</span><span class="pas1-symbol">(-</span><span class="pas1-number">5</span><span class="pas1-symbol">,</span><span class="pas1-number">0</span><span class="pas1-symbol">);</span><span class="pas1-space"> lineTo</span><span class="pas1-symbol">(-</span><span class="pas1-number">6</span><span class="pas1-symbol">,</span><span class="pas1-number">0</span><span class="pas1-symbol">);
</span><span class="pas1-space"> lineStyle</span><span class="pas1-symbol">(</span><span class="pas1-number">1</span><span class="pas1-symbol">,</span><span class="pas1-number">0</span><span class="pas1-symbol">);
</span><span class="pas1-space"> moveTo</span><span class="pas1-symbol">(</span><span class="pas1-space"> </span><span class="pas1-float">3.5</span><span class="pas1-symbol">,</span><span class="pas1-space"> </span><span class="pas1-float">3.5</span><span class="pas1-symbol">);</span><span class="pas1-space"> lineTo</span><span class="pas1-symbol">(</span><span class="pas1-space"> </span><span class="pas1-float">4.5</span><span class="pas1-symbol">,</span><span class="pas1-space"> </span><span class="pas1-float">4.5</span><span class="pas1-symbol">);
</span><span class="pas1-space"> moveTo</span><span class="pas1-symbol">(</span><span class="pas1-space"> </span><span class="pas1-float">3.5</span><span class="pas1-symbol">,-</span><span class="pas1-float">3.5</span><span class="pas1-symbol">);</span><span class="pas1-space"> lineTo</span><span class="pas1-symbol">(</span><span class="pas1-space"> </span><span class="pas1-float">4.5</span><span class="pas1-symbol">,-</span><span class="pas1-float">4.5</span><span class="pas1-symbol">);
</span><span class="pas1-space"> moveTo</span><span class="pas1-symbol">(-</span><span class="pas1-float">3.5</span><span class="pas1-symbol">,-</span><span class="pas1-float">3.5</span><span class="pas1-symbol">);</span><span class="pas1-space"> lineTo</span><span class="pas1-symbol">(-</span><span class="pas1-float">4.5</span><span class="pas1-symbol">,-</span><span class="pas1-float">4.5</span><span class="pas1-symbol">);
</span><span class="pas1-space"> moveTo</span><span class="pas1-symbol">(-</span><span class="pas1-float">3.5</span><span class="pas1-symbol">,</span><span class="pas1-space"> </span><span class="pas1-float">3.5</span><span class="pas1-symbol">);</span><span class="pas1-space"> lineTo</span><span class="pas1-symbol">(-</span><span class="pas1-float">4.5</span><span class="pas1-symbol">,</span><span class="pas1-space"> </span><span class="pas1-float">4.5</span><span class="pas1-symbol">);
</span><span class="pas1-reservedword">end</span><span class="pas1-symbol">;
</span><span class="pas1-reservedword">procedure</span><span class="pas1-space"> TCell</span><span class="pas1-symbol">.</span><span class="pas1-identifier">IsFlag</span><span class="pas1-symbol">(</span><span class="pas1-identifier">NewState</span><span class="pas1-symbol">:</span><span class="pas1-datatype">integer</span><span class="pas1-symbol">);
</span><span class="pas1-reservedword">begin
</span><span class="pas1-space"> </span><span class="pas1-reservedword">if</span><span class="pas1-space"> NewState</span><span class="pas1-symbol">=</span><span class="pas1-number">2</span><span class="pas1-space"> </span><span class="pas1-reservedword">then</span><span class="pas1-space"> Mines</span><span class="pas1-symbol">:=</span><span class="pas1-identifier">Mines</span><span class="pas1-symbol">-</span><span class="pas1-number">1</span><span class="pas1-symbol">;
</span><span class="pas1-space"> Flags</span><span class="pas1-symbol">:=</span><span class="pas1-identifier">Flags</span><span class="pas1-symbol">+</span><span class="pas1-number">2</span><span class="pas1-symbol">;
</span><span class="pas1-space"> State</span><span class="pas1-symbol">:=</span><span class="pas1-identifier">NewState</span><span class="pas1-symbol">;
</span><span class="pas1-space"> lineStyle</span><span class="pas1-symbol">(</span><span class="pas1-number">1</span><span class="pas1-symbol">,</span><span class="pas1-number">0</span><span class="pas1-symbol">);
</span><span class="pas1-space"> beginFill</span><span class="pas1-symbol">(</span><span class="pas1-number">0</span><span class="pas1-symbol">);
</span><span class="pas1-space"> moveTo</span><span class="pas1-symbol">(</span><span class="pas1-number">0</span><span class="pas1-symbol">,</span><span class="pas1-number">3</span><span class="pas1-symbol">);
</span><span class="pas1-space"> lineTo</span><span class="pas1-symbol">(-</span><span class="pas1-number">5</span><span class="pas1-symbol">,+</span><span class="pas1-number">5</span><span class="pas1-symbol">);
</span><span class="pas1-space"> lineTo</span><span class="pas1-symbol">(+</span><span class="pas1-number">5</span><span class="pas1-symbol">,+</span><span class="pas1-number">5</span><span class="pas1-symbol">);
</span><span class="pas1-space"> lineTo</span><span class="pas1-symbol">(</span><span class="pas1-number">0</span><span class="pas1-symbol">,</span><span class="pas1-number">3</span><span class="pas1-symbol">);
</span><span class="pas1-space"> lineTo</span><span class="pas1-symbol">(</span><span class="pas1-number">0</span><span class="pas1-symbol">,-</span><span class="pas1-number">2</span><span class="pas1-symbol">);
</span><span class="pas1-space"> endFill</span><span class="pas1-symbol">;
</span><span class="pas1-space"> lineStyle</span><span class="pas1-symbol">(</span><span class="pas1-number">1</span><span class="pas1-symbol">,</span><span class="pas1-hexadecimal">$ff0000</span><span class="pas1-symbol">);
</span><span class="pas1-space"> beginFill</span><span class="pas1-symbol">(</span><span class="pas1-hexadecimal">$ff0000</span><span class="pas1-symbol">);
</span><span class="pas1-space"> moveTo</span><span class="pas1-symbol">(</span><span class="pas1-number">0</span><span class="pas1-symbol">,-</span><span class="pas1-number">1</span><span class="pas1-symbol">);
</span><span class="pas1-space"> lineTo</span><span class="pas1-symbol">(</span><span class="pas1-number">0</span><span class="pas1-symbol">,-</span><span class="pas1-number">5</span><span class="pas1-symbol">);
</span><span class="pas1-space"> lineTo</span><span class="pas1-symbol">(-</span><span class="pas1-number">5</span><span class="pas1-symbol">,-</span><span class="pas1-number">3</span><span class="pas1-symbol">);
</span><span class="pas1-space"> lineTo</span><span class="pas1-symbol">(</span><span class="pas1-number">0</span><span class="pas1-symbol">,-</span><span class="pas1-number">1</span><span class="pas1-symbol">);
</span><span class="pas1-space"> endFill</span><span class="pas1-symbol">;
</span><span class="pas1-reservedword">end</span><span class="pas1-symbol">;
</span><span class="pas1-reservedword">procedure</span><span class="pas1-space"> TCell</span><span class="pas1-symbol">.</span><span class="pas1-identifier">IsWrong</span><span class="pas1-symbol">;
</span><span class="pas1-reservedword">begin
</span><span class="pas1-space"> IsDown_</span><span class="pas1-symbol">(</span><span class="pas1-hexadecimal">$a0a0a0</span><span class="pas1-symbol">);
</span><span class="pas1-space"> lineStyle</span><span class="pas1-symbol">(</span><span class="pas1-number">2</span><span class="pas1-symbol">,</span><span class="pas1-hexadecimal">$ff0000</span><span class="pas1-symbol">);
</span><span class="pas1-space"> moveTo</span><span class="pas1-symbol">(-</span><span class="pas1-number">5</span><span class="pas1-symbol">,-</span><span class="pas1-number">5</span><span class="pas1-symbol">);
</span><span class="pas1-space"> lineTo</span><span class="pas1-symbol">(+</span><span class="pas1-number">5</span><span class="pas1-symbol">,+</span><span class="pas1-number">5</span><span class="pas1-symbol">);
</span><span class="pas1-space"> moveTo</span><span class="pas1-symbol">(-</span><span class="pas1-number">5</span><span class="pas1-symbol">,+</span><span class="pas1-number">5</span><span class="pas1-symbol">);
</span><span class="pas1-space"> lineTo</span><span class="pas1-symbol">(+</span><span class="pas1-number">5</span><span class="pas1-symbol">,-</span><span class="pas1-number">5</span><span class="pas1-symbol">);
</span><span class="pas1-reservedword">end</span><span class="pas1-symbol">;
</span><span class="pas1-reservedword">constructor</span><span class="pas1-space"> TMatrix</span><span class="pas1-symbol">.</span><span class="pas1-identifier">Create</span><span class="pas1-symbol">;
</span><span class="pas1-reservedword">begin
</span><span class="pas1-space"> matrixType</span><span class="pas1-symbol">:=</span><span class="pas1-string">'box'</span><span class="pas1-symbol">;
</span><span class="pas1-space"> x</span><span class="pas1-symbol">:=-</span><span class="pas1-float">4.5</span><span class="pas1-symbol">;
</span><span class="pas1-space"> y</span><span class="pas1-symbol">:=-</span><span class="pas1-float">4.5</span><span class="pas1-symbol">;
</span><span class="pas1-space"> w</span><span class="pas1-symbol">:=</span><span class="pas1-number">6</span><span class="pas1-symbol">;
</span><span class="pas1-space"> h</span><span class="pas1-symbol">:=</span><span class="pas1-number">6</span><span class="pas1-symbol">;
</span><span class="pas1-space"> r</span><span class="pas1-symbol">:=</span><span class="pas1-number">0</span><span class="pas1-symbol">;
</span><span class="pas1-reservedword">end</span><span class="pas1-symbol">;
</span><span class="pas1-reservedword">function</span><span class="pas1-space"> AddCaption</span><span class="pas1-symbol">(</span><span class="pas1-identifier">name</span><span class="pas1-symbol">,</span><span class="pas1-identifier">text</span><span class="pas1-symbol">:</span><span class="pas1-reservedword">string</span><span class="pas1-symbol">;</span><span class="pas1-space"> depth</span><span class="pas1-symbol">,</span><span class="pas1-identifier">left</span><span class="pas1-symbol">,</span><span class="pas1-identifier">top</span><span class="pas1-symbol">,</span><span class="pas1-identifier">width</span><span class="pas1-symbol">,</span><span class="pas1-identifier">height</span><span class="pas1-symbol">,</span><span class="pas1-identifier">color</span><span class="pas1-symbol">,</span><span class="pas1-identifier">background</span><span class="pas1-symbol">:</span><span class="pas1-datatype">integer</span><span class="pas1-symbol">):</span><span class="pas1-identifier">TextField</span><span class="pas1-symbol">;
</span><span class="pas1-reservedword">begin
</span><span class="pas1-space"> Result</span><span class="pas1-symbol">:=</span><span class="pas1-identifier">TextField</span><span class="pas1-symbol">.</span><span class="pas1-identifier">Create</span><span class="pas1-symbol">(</span><span class="pas1-reservedword">nil</span><span class="pas1-symbol">,</span><span class="pas1-identifier">name</span><span class="pas1-symbol">,</span><span class="pas1-identifier">depth</span><span class="pas1-symbol">,</span><span class="pas1-identifier">left</span><span class="pas1-symbol">,</span><span class="pas1-identifier">top</span><span class="pas1-symbol">,</span><span class="pas1-identifier">width</span><span class="pas1-symbol">,</span><span class="pas1-identifier">height</span><span class="pas1-symbol">);
</span><span class="pas1-space"> Result</span><span class="pas1-symbol">.</span><span class="pas1-identifier">backgroundcolor</span><span class="pas1-symbol">:=</span><span class="pas1-identifier">background</span><span class="pas1-symbol">;
</span><span class="pas1-space"> Result</span><span class="pas1-symbol">.</span><span class="pas1-identifier">background</span><span class="pas1-symbol">:=</span><span class="pas1-identifier">true</span><span class="pas1-symbol">;
</span><span class="pas1-space"> Result</span><span class="pas1-symbol">.</span><span class="pas1-identifier">Text</span><span class="pas1-symbol">:=</span><span class="pas1-identifier">text</span><span class="pas1-symbol">;
</span><span class="pas1-space"> format</span><span class="pas1-symbol">.</span><span class="pas1-identifier">color</span><span class="pas1-symbol">:=</span><span class="pas1-identifier">color</span><span class="pas1-symbol">;
</span><span class="pas1-space"> Result</span><span class="pas1-symbol">.</span><span class="pas1-identifier">setTextFormat</span><span class="pas1-symbol">(</span><span class="pas1-identifier">format</span><span class="pas1-symbol">);
</span><span class="pas1-reservedword">end</span><span class="pas1-symbol">;
</span><span class="pas1-reservedword">begin
</span><span class="pas1-space"> format</span><span class="pas1-symbol">:=</span><span class="pas1-identifier">TextFormat</span><span class="pas1-symbol">.</span><span class="pas1-identifier">Create</span><span class="pas1-symbol">(</span><span class="pas1-string">'Tahoma'</span><span class="pas1-symbol">,</span><span class="pas1-number">9</span><span class="pas1-symbol">);
</span><span class="pas1-space"> format</span><span class="pas1-symbol">.</span><span class="pas1-identifier">bold</span><span class="pas1-symbol">:=</span><span class="pas1-identifier">true</span><span class="pas1-symbol">;
</span><span class="pas1-space"> format</span><span class="pas1-symbol">.</span><span class="pas1-identifier">align</span><span class="pas1-symbol">:=</span><span class="pas1-string">'center'</span><span class="pas1-symbol">;
</span><span class="pas1-space"> link</span><span class="pas1-symbol">:=</span><span class="pas1-identifier">TLink</span><span class="pas1-symbol">.</span><span class="pas1-identifier">Create</span><span class="pas1-symbol">;
</span><span class="pas1-space"> Bombs</span><span class="pas1-symbol">:=</span><span class="pas1-identifier">AddCaption</span><span class="pas1-symbol">(</span><span class="pas1-string">'bombs'</span><span class="pas1-symbol">,</span><span class="pas1-string">'40'</span><span class="pas1-symbol">,-</span><span class="pas1-number">2</span><span class="pas1-symbol">,</span><span class="pas1-number">0</span><span class="pas1-symbol">,</span><span class="pas1-number">16</span><span class="pas1-symbol">,</span><span class="pas1-number">120</span><span class="pas1-symbol">,</span><span class="pas1-number">15</span><span class="pas1-symbol">,</span><span class="pas1-hexadecimal">$00ff00</span><span class="pas1-symbol">,</span><span class="pas1-number">0</span><span class="pas1-symbol">);
</span><span class="pas1-space"> AddCaption</span><span class="pas1-symbol">(</span><span class="pas1-string">'help'</span><span class="pas1-symbol">,</span><span class="pas1-string">'Shift+Click for Flags'</span><span class="pas1-symbol">,-</span><span class="pas1-number">3</span><span class="pas1-symbol">,</span><span class="pas1-number">120</span><span class="pas1-symbol">,</span><span class="pas1-number">16</span><span class="pas1-symbol">,</span><span class="pas1-number">120</span><span class="pas1-symbol">,</span><span class="pas1-number">15</span><span class="pas1-symbol">,</span><span class="pas1-number">0</span><span class="pas1-symbol">,</span><span class="pas1-hexadecimal">$e0e0f0</span><span class="pas1-symbol">);
</span><span class="pas1-space"> Matrix</span><span class="pas1-symbol">:=</span><span class="pas1-identifier">TMatrix</span><span class="pas1-symbol">.</span><span class="pas1-identifier">Create</span><span class="pas1-symbol">;
</span><span class="pas1-space"> </span><span class="pas1-reservedword">for</span><span class="pas1-space"> x</span><span class="pas1-symbol">:=</span><span class="pas1-number">0</span><span class="pas1-space"> </span><span class="pas1-reservedword">to</span><span class="pas1-space"> </span><span class="pas1-number">15</span><span class="pas1-space"> </span><span class="pas1-reservedword">do
</span><span class="pas1-space">  </span><span class="pas1-reservedword">for</span><span class="pas1-space"> y</span><span class="pas1-symbol">:=</span><span class="pas1-number">0</span><span class="pas1-space"> </span><span class="pas1-reservedword">to</span><span class="pas1-space"> </span><span class="pas1-number">15</span><span class="pas1-space"> </span><span class="pas1-reservedword">do
</span><span class="pas1-space">   Cells</span><span class="pas1-symbol">[</span><span class="pas1-identifier">x</span><span class="pas1-symbol">,</span><span class="pas1-identifier">y</span><span class="pas1-symbol">]:=</span><span class="pas1-identifier">TCell</span><span class="pas1-symbol">.</span><span class="pas1-identifier">Create</span><span class="pas1-symbol">(</span><span class="pas1-string">'cell_'</span><span class="pas1-symbol">+</span><span class="pas1-identifier">IntToStr</span><span class="pas1-symbol">(</span><span class="pas1-identifier">x</span><span class="pas1-symbol">)+</span><span class="pas1-string">'_'</span><span class="pas1-symbol">+</span><span class="pas1-identifier">IntToStr</span><span class="pas1-symbol">(</span><span class="pas1-identifier">y</span><span class="pas1-symbol">),</span><span class="pas1-identifier">x</span><span class="pas1-symbol">,</span><span class="pas1-identifier">y</span><span class="pas1-symbol">);
</span><span class="pas1-space"> NewGame</span><span class="pas1-symbol">;
</span><span class="pas1-reservedword">end</span><span class="pas1-symbol">.
</span></span>
</code></pre>
      <hr>
      <br>
      <a href="http://sourceforge.net/projects/flashpascal">
        <img src="http://sflogo.sourceforge.net/sflogo.php?group_id=236643&type=12" border="0" title="Get FlashPascal at SourceForge.net. Fast, secure and Free Open Source software downloads" alt="Get FlashPascal at SourceForge.net. Fast, secure and Free Open Source software downloads"/></a>
      <a href="http://sourceforge.net/donate/index.php?group_id=236643">
        <img src="http://images.sourceforge.net/images/project-support.jpg" width="80" height="30" border="0" alt="Support This Project"/></a>
      <br>
      <br>Regards, Paul TOTH & Péter Gábor
    </div>
  </body>
</html>
